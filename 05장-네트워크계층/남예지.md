# 5장. 네트워크 계층: 목적지에 데이터 전달하기

## 17. 네트워크 계층의 역할

네트워크 계층이란 네트워크간의 연결이 가능하게 해주는것

데이터-링크 계층 만으로는 하나의 네트워크 안에서만 통신이 가능하다

- 라우터 - 데이터의 목적지가 정해지면 해당목적지까지 어떤경로로 가능것이 좋은지 알려줌

- IP주소 - 네트워크 상의 데이터의 목적지가 되는 주소, 어떤 네트워킈의 어떤 컴퓨터인지 구분하게해줌

- 라우팅 - 목적지 IP까지 어떤 경로로 데이터를 보낼지 결정하는것

### IP란?

Internet Protocol - 네트워크 계층에서 사용되는 프로토콜이다

네트워크 계층에서는 데이터에 IP 헤더를 붙인다(캡슐화)

출발지 IP주소와 목적지 IP주소가 포함되어 있다

> IP헤더가 붙은 데이터를 IP 패킷이라고 한다

## 18. IP주소의 구조

인터넷 서비스 제공자에게 받을수 있다

IPv4 IPv6 버전이 있음

  IPv4 - 32비트로 주소를 약 43억개 만들수 있다
  
  IPv6 - 128비트로 주소 부족문제를 해결할 수 있게 되었다 (약 340간 개)

- 공인 IP 주소 - 인터넷에 직접 연결되는 컴퓨터나 라우터에 할당
- 사설 IP 주소 - 회사나 가정의 랜에 있는 컴퓨터에 할당

랜 안에 컴퓨터가 여러대 있을때

라우터에만 공인 IP주소를 할당

나머지 컴퓨터는 자유롭게 사설 IP주소를 설정하거나 DHCP를사용한다

> 공인 IP주소는 사용할 수 있는 숫자가 제한적이기 때문

### IP주소 표기

32비트로 구분하기 쉽도록 10진수로 표시한다

11000000101010000000000100001010

11000000 | 10101000 | 00000001 | 00001010

192 168 1 10

192.168.1.10                            

              


  
8비트씩 나누어 표기하고, 이렇게 나누어진 8비트 한 덩어리를 옥텟이라고 부른다  


- 네트워크ID - 어떤 네트워크인지를 나타냄

- 호스트ID - 해당 네트워크 안의 어느 컴퓨터인지를 나타냄

## 19. IP주소의 클래스 구조

네트워크 크기를 조정하기 위해 클래스라는 개념으로 구분한다

| 클래스이름 | 내용 | 클래스이름 | 내용 |
| --- | --- | --- | --- |
| A클래스 | 대규모 네트워크 주소 | D 클래스 | 멀티캐스트 주소 |
| B클래스 | 중형 네트워크 주소 | E 클래스 | 연구 및 특수용도 주소 |
| C클래스 | 소규모 네트워크 주소 |  |  |

**클래스별 네트워크ID와 호스트 ID**

| 클래스 이름 | 네트워크 ID | 호스트 ID |
| --- | --- | --- |
| A클래스 | 00000001 | 00000000 00000000 00000000 |
| B클래스 | 10000000 00000000 | 00000000 00000000 |
| C클래스 | 10000000 00000000 00000000 | 00000000 |

**클래스와 공인 IP 주소의 범위**

| 종류 | 공인 IP 주소의 범위 |
| --- | --- |
| A 클래스 | 1.0.0.0 ~ 9.255.255.255 / 11.0.0.0 ~ 126.255.255.255 |
| B 클래스 | 128.0.0.0 ~ 172.15.255.255 / 172.32.0.0 ~ 191.255.255.255 |
| C 클래스 | 192.0.0.0 ~ 192.167.255.255 / 192.169.0.0 ~ 223.255.255.255 |

**클래스와 사설 IP 주소의 범위**

| 종류 | 공인 IP 주소의 범위 |
| --- | --- |
| A 클래스 | 10.0.0.0 ~ 10.255.255.255 |
| B 클래스 | 172.16.0.0 ~ 172.31.255.255 |
| C 클래스 | 192.168.0.0 ~ 192.168.255.255 |

## 20. 네트워크 주소와 브로드캐스트 주소의 구조

컴퓨터나 라우터가 자신의 IP로 사용할수 없다

- **네트워크 주소**: 호스트 ID가 0
    - 전체 네트워크에서 작은 네트워크를 식별하는데 사용된다
- **브로드 캐스트 주소**: 호스트ID가 255
    - 네트워크에 있는 컴퓨터나 장비 모두에게 데이터를 전송하는데 사용된다

## 21. 서브넷의 구조

대규모 네트워크를 작은 네트워크로 분할하여 브로드캐스트 범위를 좁힐수 있다

더 많은 네트워크를 만들수 있기 때문에 IP주소를 효과적으로 사용할수 있다

**서브넷팅** - 네트워크를 분할하는 것  
**서브넷** - 분할된 네트워크

- 네트워크ID | 호스트 ID
- 네트워크ID | 서브넷ID | 호스트 ID

호스트 ID에서 비트를 빌려 서브넷 ID로 사용한다

### 서브넷 마스크

네트워크 ID와 호스트ID를 식별하기 위한 값

| 클래스 | 서브넷 마스크 | 프리픽스 표기법 |
| --- | --- | --- |
| A | 255.0.0.0 | /8 |
| B | 255.255.0.0 | /16 |
| C | 255.255.255.0 | /24 |

## 22. 라우터의 구조

라우터란 네트워크를 분리할수 있는 기기이다

- 스위치에 연결된 네트워크는 모두 동일한 네트워크에 속한다

다른 컴퓨터에 접속하려 할때

네트워크 출입구를 지정한 뒤 라우터로 데이터를 전송함

### 라우팅

**라우팅 테이블** - 다른 네트워크로 갈때의 최적의 경로가 저장되어 있는 테이블

- 수동으로 등록 - 소규모 네트워크에 적합하다
- 자동으로 등록 - 대규모 네트워크에 적합

**라우팅 프로토콜** - 라우터 간에 라우팅 정보를 교환하기 위한 프로토콜

- RIP, OSPF, BGP 등이 있다
