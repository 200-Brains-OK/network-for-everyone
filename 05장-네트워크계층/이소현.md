# 학습 목표

- IP 이해하기
- 라우터 이해하기
- IP 주소 이해하기
- 서브넷 이해하기
- 라우팅 이해하기

# 17 네트워크 계층의 역할

- 라우터를 통한 라우팅을 함
- 패킷 전송 담당

## 01 네트워크 간의 연결 구조

- 다른 네트워크에 있는 목적지로 데이터를 전달하려면 네트워크 계층 기술이 필요함
- 데이터링크의 이더넷 규칙: **같은 네트워크**에 있는 컴퓨터로는 데이터 전송 가능
    - 인터넷이나 다른 네트워크로는 데이터 전송 불가
- 수많은 네트워크가 연결된 환경에서 데이터 링크 계층의 기능만으로는 다른 네트워크로 데이터 전송이 힘듦

### → 네트워크 간 통신이 가능하게 하기 위해 네트워크 계층이 필요한 것

- 네트워크 계층을 통해 다른 네트워크로 데이터를 전송하려면 **라우터가 필요**함
- 라우터: 데이터의 목적지가 정해지면 해당 목적지까지 어떤 경로로 가는 것이 좋은지 알려줌
    - 데이터를 보내려는 상대가 어딨는지 알아야만 경로를 알려줄 수 있음

### IP주소를 알아야함! → 네트워크에 있는 목적지 지정 가능

- MAC 주소로는 랜에서는 통신가능하지만 다른 네트워크로는 데이터를 보낼 수 없음
- IP 주소: 어떤 네트워크의 어떤 컴퓨터인지 구분할 수 있도록 하는 주소
    - IP: 인터넷 프로토콜
        - 인터넷에 있는 한 컴퓨터에서 다른 컴퓨터로 데이터를 보내는 데 사용되는 네트워크 계층 프로토콜
- 원하는 목적지를 IP주소로 지정 + 데이터를 어떤 경로로 보낼지 결정 → **라우팅**
    - 라우팅: 목적지 IP주소까지 어떤 경로로 데이터를 보낼지 결정하는 것
- 라우터가 라우팅을 해주는 것

cf) 레이어 3 스위치: 네트워크를 분할하여 라우팅을 할 수 있는 네트워크 장비

- 라우터를 사용하면 거리에 관계없이 다른 네트워크로 데이터를 보낼 수 있음
- 라우팅 테이블: 라우터가 경로 정보를 등록하고 관리하는 테이블

## 02 IP란?

- IP: 네트워크 계층에 있는 프로토콜
    - IP가 있어서 데이터를 다른 네트워크에 있는 목적지까지 보낼 수 있는 것
- 네트워크 계층에서 캡슐화할 때 IP 헤더가 붙음
- IP 헤더 구성: 1. 버전 2. 헤더 길이 3. 서비스 유형 4. 전체 패킷 길이 5. 일련번호 6. 조각 상태 7. 조각의 위치 8. TTL 9. 프로토콜 10. 헤더 체크섬 11. 출발지 IP 주소 12. 목적지 IP주소
    
    ![image.png](attachment:c5a247f0-d627-4763-ac97-51859fa69e66:image.png)
    
    - **다 외울필요 없고 출발지 IP 주소와 목적지 IP 주소가 있다는 것만 기억하면됨**
- IP 패킷: IP 헤더가 추가되어 만들어진 것

# 18 IP 주소의 구조

## 01 IP 주소란?

- IP 주소를 받는 방법
    - ISP(인터넷 서비스 제공자)에게 할당 받을 수 있음
- IPv4 IPv6 2가지 버전이 있음
    - IPv4 주소는 32비트 → 부족해짐 → IPv6 주소(128비트)를 사용하게됨
        - IPv6 네트워크 보급되면서 가정에 있는 TV나 에어컨에서도 인터넷을 연결하여 통신할 수 있게됨
- IP 주소 종류: **공인 IP주소와 사설 IP주소**
    - ISP가 제공하는 것은 공인 IP 주소

### IP주소가 두 종류가 필요한 이유는?

- 주소의 수가 고갈되고 있기 때문에
    
    → - 인터넷에 직접 연결되는 컴퓨터나 라우터에는 공인 IP 주소 할당
    
        - 회사나 가정 랜에 있는 컴퓨터는 사설 IP 주소 할당
    
    - 랜의 네트워크 관리자가 자유롭게 사설 IP 주소를 할당 가능 or 라우터의 DHCP 기능을 사용하여 주소를 사설 IP 주소를 자동 할당함
        - DHCP: Dynamic Host Configuration Protocol → IP주소를 자동으로 할당하는 프로토콜

- MAC 주소와 IP 주소 차이는?
    - MAC 주소: 48비트, 16진수로 표현
    - IP 주소: 32비트, 10진수로 표현
- IP주소: 사람이 읽기 쉬우라고 8비트 단위로 나눠서 표시함
    - 더 읽기 쉽도록 8비트를 10진수로 변환함 → **실제 IP주소는 2진수로 되어있음**

cf) 8비트를 옥텟이라고 부름

- IP주소는 네트워크 ID와 호스트 ID로 나눠져있음
    - 네트워크 ID: 어떤 네트워크인지 나타냄
    - 호스트 ID: 해당 네트워크의 어느 컴퓨터인지 나타냄

![image.png](attachment:e55c51fa-1fb9-4cf4-a7f5-8cef175ed433:image.png)

# 19 IP 주소의 클래스 구조

## 01 IP 주소 클래스란?

- IPv4에서 네트워크 ID와 호스트ID를 조정하여 네트워크 크기를 조정할 수 있음
    - 네트워크 ID를 크거나 작게 만들 수 있다는 뜻

| 클래스 이름 | 내용 | 네트워크ID |
| --- | --- | --- |
| A클래스 | 대규모 네트워크 주소 | 처음 8비트 |
| B클래스 | 중형 네트워크 주소 | 처음 16비트 |
| C클래스 | 소규모 네트워크 주소 | 처음 24비트 |
| D클래스 | 멀티캐스트 주소 | - |
| E클래스 | 연구 및 특수용도 주소 | - |
- 일반 네트워크에서는 A~C클래스까지 사용할 수 있음
- 공인 IP주소와 사설 IP주소를 포함한 클래스 범위

| 클래스 이름 | IP 주소 범위 | 공인 IP 주소 범위 | 사설 IP 주소 범위 |
| --- | --- | --- | --- |
| A클래스 | 1.0.0.0~127.255.255.255 | 1.0.0.0~9.255.255.255
11.0.0.0~126.255.255.255 | 10.0.0.0~10.255.255.255 |
| B클래스 | 128.0.0.0~191.255.255.255 | 128.0.0.0~172.15.255.255
172.32.0.0~191.255.255.255 | 172.16.0.0~172.31.255.255 |
| C클래스 | 192.0.0.0~223.255.255.255 | 192.0.0.0~192.167.255.255
192.169.0.0~223.255.255.255 | 192.168.0.0~192.168.255.255 |
- 사설 IP주소는 절대 공인 IP주소로 사용할 수 없음
- 가정 랜에서는 주로 C클래스의 사설 IP 주소인 192.168.O.O이 사용됨
    - 확인 방법: ipconfig 명령어

# 20 네트워크 주소와 브로드캐스트 주소의 구조

- 컴퓨터에 할당할 수 없는 IP주소가 있음 → 네트워크 주소와 브로드캐스트 주소

## 01 네트워크 주소와 브로드캐스트 주소란?

- 네트워크 주소: 전체 네트워크에서 작은 네트워크를 식별하는데 사용
    - 호스트 ID가 10진수로 0이고 2진수면 00000000인 주소
        - 이주소가 네트워크 전체를 대표하는 주소가 되는것
- 브로드캐스트 주소: 네트워크에 있는 컴퓨터나 장비 모두에게 한 번에 데이터를 전송하는데 사용되는 전용 IP주소
    - 호스트 ID가 10진수로 255고 2진수면 11111111인 주소
        - ex) 192.168.1.255의 브로드캐스트 주소로 데이터를 전송하면 네트워크 안 모든 컴퓨터가 데이터를 받게됨

# 21 서브넷의 구조

## 01 서브넷이란?

- 서브넷팅: 네트워크를 분할하기 위해 IP 주소의 구성을 변경하는 작업
    - 많은 수의 컴퓨터가 브로드캐스트 패킷을 전송하면 모든 컴퓨터에 패킷이 전송되고 네트워크가 혼잡해지기 때문에 네트워크를 분할함
- 서브넷: 분할된 네트워크
- 서브넷팅을 하면 기존 [네트워크 ID+호스트 ID] 구성 → [네트워크 ID+서브넷 ID+호스트 ID] 구성으로 바뀌게됨
    - 호스트 ID에서 비트를 빌려 서브넷으로 만들 수 있음

## 02 서브넷 마스크란?

- 서브넷 ID(=서브넷 비트): IP 주소의 네트워크 부분을 늘리기 위해 서브넷 마스크로 사용되는 비트
- 서브넷 마스크: 네트워크 ID와 호스트 ID를 식별하기 위한 값
    - IP 주소의 **네트워크 부분만 나타나게하여** 같은 네트워크인지 판별하게 하는 마스크
    - 사용이유: IP 주소를 서브넷팅 하면 어디까지가 네트워크 ID과 어디부터가 호스트 ID인지 판단이 어렵기 때문
        
        
        | 클래스 | 서브넷 마스크 |
        | --- | --- |
        | A클래스 | 255.0.0.0 |
        | B클래스 | 255.255.0.0 |
        | C클래스 | 255.255.255.0 |
    - 프리픽스 표기법: 서브넷 마스크(네트워크ID+서브넷ID 비트)를 슬래시(/비트 수)로 나타낸 것
        - ex) 255.255.255.0은 /24
- 예시: C클래스의 IP주소를 서브넷팅
    - 일반적으로 C클래스는 24비트가 네트워크 ID임
    - 네트워크 ID를 28비트로 변경하면 **4비트를 호스트 ID에서 빌리게 되는거임**

# 22 라우터의 구조

## 01 라우터란?

- 라우터: 서로 다른 네트워크와 통신을 하기 위해 필요
    - 라우터로 네트워크를 분리할 수 **있음**
- 스위치(레이어2 스위치): 네트워크에서 모든 컴퓨터와 스위치가 동일한 네트워크에 속하게 됨
    - 스위치와 허브는 네트워크를 분리할 수 **없음**

### 네트워크를 분할한 다음에 컴퓨터가 다른 네트워크로 접속하려고 하면?

- 컴퓨터1이 다른 네트워크에 데이터를 전송하려면?
    1. 라우터의 IP 주소를 설정해야함
        - ==기본 게이트웨이: 네트워크의 출입구를 설정하는 것과 같기 때문
        - 라우터의 IP 주소를 설정하는 이유는?
            - 다른 네트워크로 데이터를 보낼 때 어디로 전송하는지 모르기 때문
            
            → 네트워크의 출입구를 지정하고 일단은 라우터로 데이터를 전송하기 위해서 라우터의 IP주소가 필요
            
    2. **라우팅 기능이 필요**

## 02 라우팅이란?

- 라우팅: 경로 정보를 기반으로 현재의 네트워크에서 다른 네트워크로 최적의 경로를 통해 데이터를 전송함
- 라우팅 테이블: 경로 정보가 등록되어있는 테이블
    - 다른 네트워크로 가기 위한 가장 좋은 라우터의 정보를 가지고 있음
    
    ![image.png](attachment:e88d61ec-23cc-4237-a397-1da0ad50aa0d:image.png)
    
    - 라우팅 테이블 등록 방법
        - 수동: 소규모 네트워크에 적합
        - 자동: 대규모 네트워크에 적합
            - 라우터 간에 경로 정보를 서로 교환하여 라우팅 테이블 정보를 자동으로 수정해줌
            - cf) 수동: 네트워크 관리자가 직접 변경하지 않아도됨
- 라우팅 프로토콜: 라우팅 정보를 교환하기 위한 프로토콜
    - 라우터 간에 경로 정보를 교환하고 그것을 라우팅 테이블에 등록해나가는 것
    - 예시: RIP, OSPF, BGP

### 용어정리

- 멀티캐스트: 한컴퓨터(호스트)에서 패킷을 여러 컴퓨터로 동시에 전송하는 것
- 브로드캐스트: IP 네트워크에 있는 모든 컴퓨터(호스트)로 데이터를 전송하는 방식
